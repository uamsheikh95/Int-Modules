<odoo>
  <report
     id="action_report_billing_invoice_a5"
     name="mgs_billing.meter_reading"
     model="mgs_billing.meter_reading"
     string="Invoice A5"
     report_type="qweb-html"
     paperformat="paperformat_billing_invoice"
 />

 <template id="meter_reading">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="o">
         <t t-call="web.external_layout" t-lang="en_US">
           <div class="page">

           <h2 style="margin-top: 20px;color: black !important">Water Bill# <span t-esc="o.move_id.name"/></h2>

            <div class="row" style="padding-top: 20px">

              <div class="col-6 pull-left" style="padding-left: 0">

                <h5 style="font-weight: bold">Bill to</h5>


                <div class="row col">
                    <div class="col-12">
                        <strong>Customer: </strong>
                        <span t-field="o.move_id.partner_id.name"/>
                    </div>
                </div>

                <div class="row col">
                    <div class="col-12">
                        <strong>Property: </strong>
                        <span t-field="o.property_id.name"/>
                    </div>
                </div>

                <div class="row col">
                    <div class="col-12">
                        <strong>Zone: </strong>
                        <span t-field="o.property_id.zone_id.name"/>
                    </div>
                </div>



               </div>

              <div class="col-6 pull-right">
                 <table style="width: 100%; border: 1px solid #000000">
                   <tr style="height: 32px;border: 1px solid;height: 25px; background: #dddddd">
                       <td style="padding-left: 8px;width: 50%;border: 1px solid"><strong>Bill Date </strong></td>
                       <td class="text-right" style="padding-right: 8px;width: 50%;border: 1px solid">
                         <span t-field="o.move_id.invoice_date"/>
                       </td>
                     </tr>

                    <tr style="height: 32px;border: 1px solid;height: 25px; ">
                       <td style="padding-left: 8px;width: 50%;border: 1px solid"><strong>Current Reading </strong></td>
                       <td class="text-right" style="padding-right: 8px;width: 50%;border: 1px solid">
                         <span t-field="o.current_reading"/>
                       </td>
                     </tr>

                     <tr style="height: 32px;border: 1px solid;height: 25px; ">
                         <td style="padding-left: 8px;width: 50%;border: 1px solid"><strong>Last Reading </strong></td>
                         <td class="text-right" style="padding-right: 8px;width: 50%;border: 1px solid">
                           <span t-field="o.last_reading"/>
                         </td>
                       </tr>

                       <tr style="height: 32px;border: 1px solid;height: 25px; ">
                           <td style="padding-left: 8px;width: 50%;border: 1px solid"><strong>Difference </strong></td>
                           <td class="text-right" style="padding-right: 8px;width: 50%;border: 1px solid">
                             <span t-field="o.difference"/> Unit
                           </td>
                         </tr>

                     <!-- <tr style="height: 32px; border: 1px solid">
                       <td colspan="2" class="text-center" style="padding-left: 8px;"><strong>Reading </strong></td>
                     </tr>

                     <tr style="height: 32px; border-bottom: 1px solid">
                       <td colspan="2" class="text-center" style="padding-right: 8px;color:#000000 !important;">
                         <span t-field="o.last_reading" /> - <span t-field="o.current_reading" /> = <strong><span t-field="o.difference" /> Units</strong>
                       </td>
                     </tr>-->

                 </table>
               </div>
             </div>

             <!-- items table -->
             <table style="width: 100%;margin-top: 20px">
               <thead>
                 <tr style="border-top: 1px solid #000000;border-bottom: 1px solid #000000">
                               <!-- TODO: remove in master -->
                   <t t-set="colspan" t-value="6"/>
                   <th colspan="2" style="color:#000000 !important;"><span>Description</span></th>
                   <th class="d-none text-left"><span>Source Document</span></th>
                   <th class="text-right" style="color:#000000 !important;"><span>Unit</span></th>
                   <th t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" style="color:#000000 !important;"><span>Rate</span></th>
                   <th style="color:#000000 !important;" t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                       <span>Disc.%</span>
                       <!-- TODO: remove in master -->
                       <t t-set="colspan" t-value="colspan+1"/>
                   </th>
                   <!--<th t-if="doc.move_id.tax_id" style="color:#000000 !important;" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Taxes</span></th>-->
                   <th style="color:#000000 !important;" class="text-right">
                       <span groups="account.group_show_line_subtotals_tax_excluded">Amount</span>
                       <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                   </th>
                 </tr>
               </thead>

               <tbody class="invoice_tbody">
               <t t-set="current_subtotal" t-value="0"/>
               <t t-set="line_no" t-value="0"/>

               <t t-foreach="o.move_id.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)" t-as="line">
                   <t t-set="line_no" t-value="line_no + 1"/>
                   <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                   <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                   <tr style="border-top: 1px solid #000000" t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                       <t t-if="not line.display_type" name="account_invoice_line_accountable">

                         <td colspan="2" name="account_invoice_line_name"><span t-field="line.name" t-options="{'widget': 'text'}"/></td>
                         <td class="text-right">
                             <span t-field="line.quantity"/>
                             <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                         </td>
                         <td t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                             <span t-field="line.price_unit"/>
                         </td>
                         <td t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                             <span t-field="line.discount"/>
                         </td>
                         <!--<td t-if="line.tax_ids" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
                         <!--    <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>-->
                         <!--</td>-->
                         <td class="text-right o_price_total">
                             <span t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                             <span t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                         </td>
                       </t>

                       <t t-if="line.display_type == 'line_section'">
                           <td colspan="99">
                               <span t-field="line.name" t-options="{'widget': 'text'}"/>
                           </td>
                           <t t-set="current_section" t-value="line"/>
                           <t t-set="current_subtotal" t-value="0"/>
                       </t>
                       <t t-if="line.display_type == 'line_note'">
                           <td colspan="99">
                               <span t-field="line.name" t-options="{'widget': 'text'}"/>
                           </td>
                       </t>
                     </tr>

                     <!--<t t-if="current_section and (line_last or o.move_id.invoice_line_ids[line_index+1].display_type == 'line_section')">-->
                     <!--    <tr class="is-subtotal text-right">-->
                     <!--        <td colspan="99">-->
                     <!--            <strong class="mr16">Subtotal</strong>-->
                     <!--            <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.move_id.currency_id}"/>-->
                     <!--        </td>-->
                     <!--    </tr>-->
                     <!--</t>-->
                   </t>
                   <tr class="is-subtotal text-right">
                     <td class="text-right" colspan="3"/>

                     <td class="text-right" style="border-top: 1px solid">
                         <strong class="mr16">Subtotal: </strong>
                     </td>

                     <td class="text-right" style="border-top: 1px solid">
                         <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.move_id.currency_id}"/>
                     </td>
                 </tr>

                 <tr class="is-subtotal text-right">
                   <td class="text-right" colspan="3"/>

                   <td class="text-right" style="border-top: 1px solid black">
                       <strong class="mr16">Previous Amount: </strong>
                   </td>

                   <td class="text-right" style="border-top: 1px solid black">
                       <span t-esc="o._get_previous_amount(o.property_id.id, o.partner_id.id, o.move_id.invoice_date)" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.move_id.currency_id}"/>
                   </td>
               </tr>

               <tr class="is-subtotal text-right">
                   <td class="text-right" colspan="3"/>

                   <td class="text-right" style="border-top: 2px solid black">
                       <strong class="mr16"> Total: </strong>
                   </td>

                   <td class="text-right" style="border-top: 2px solid black">
                     <t t-set="total" t-value="current_subtotal + o._get_previous_amount(o.property_id.id, o.partner_id.id, o.move_id.invoice_date)"/>
                       <span t-esc="total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.move_id.currency_id}"/>
                   </td>
               </tr>
               </tbody>
           </table>

           <!--<div class="row">-->
           <!--  <div class="col">-->
           <!--    <strong>Meter Reader</strong>: <span t-field="o.meter_reader_id.name"/>-->
           <!--  </div>-->
           <!--  <div class="col">-->
           <!--    <strong>Bill Clerk</strong>: <span t-esc="user.name"/>-->
           <!--  </div>-->
           <!--</div>-->



           <table style="width:100%; margin-top: 100px;">
             <tbody>
               <tr>
                 <td class="text-center" style="width: 20%"><strong>Meter Reader:</strong></td>
                 <td style="width: 30%;"><span style="margin-left: 5px" t-field="o.meter_reader_id.name"/></td>

                 <td class="text-center" style="width: 20%"><strong>User ID</strong></td>
                 <td style="width: 30%;"><span style="margin-left: 5px" t-esc="user.name"/></td>
               </tr>
             </tbody>
           </table>

          </div>
         </t>
       </t>
    </t>
 </template>
</odoo>
