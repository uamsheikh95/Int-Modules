<odoo>

    <!--Amaana Form, Tree, Search-->
    <record id="amaana_from_view" model="ir.ui.view">
        <field name="name">Amaana Form View</field>
        <field name="model">amaana.amaana</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Validte" type="object" name="validate" class="oe_highlight"
                                    confirm="Are you sure you want to validate?" attrs="{'invisible': [('state', '=', 'validated')]}"/>
                    <!--This will create the statusbar, thanks to the widget. -->
                    <field name="state" widget="statusbar" statusbar_visible="open,validated"/>
                </header>

                <div attrs="{'invisible':[('type','=', 'transfer')]}" style="margin-left: 17px; margin-top: 10px; border: 1px solid #ddd; width: 1066px; background: white; padding: 10px; box-sizing: border-box; height: 49px;">
                    <h1 class="o_horizontal_separator" style="margin:-2px 0 20px 0" attrs="{'invisible':[('type','!=', 'deposit')]}">Deposit(Dhigasho) Form</h1>
                    <h1 class="o_horizontal_separator" style="margin:-2px 0 20px 0" attrs="{'invisible':[('type','!=', 'withdraw')]}">Withdraw(Qaadasho) Form</h1>
                </div>

                <div attrs="{'invisible':[('type','!=', 'transfer')]}" style="margin-left: 17px; margin-top: 10px; border: 1px solid #ddd; width: 1051px; background: white; padding: 10px; box-sizing: border-box; height: 49px;">
                    <h1 class="o_horizontal_separator" style="margin:-2px 0 20px 0" attrs="{'invisible':[('type','!=', 'transfer')]}">Account to Account Form</h1>
                </div>

                <sheet>
                    <div class="oe_button_box">
                        <button name="action_view_joural_entry" type="object" groups="base.group_erp_manager" class="oe_stat_button" icon="fa-book" attrs="{'invisible': [('move_id', '=', False)]}">
                            Journal
                            <field name="move_id" invisible="1" />
                        </button>
                    </div>

                    <div class="oe_title" style="float:left;width:50%">
                        <h3>
                            <field name="name" readonly="1" nolabel="1"/>
                        </h3>
                    </div>

                    <field name="type" invisible="1"/>

                    <group attrs="{'invisible':[('type','=', 'transfer')]}">
                        <group>
                            <field name="partner_id" requird="1" attrs="{'readonly':[('state', '=', 'validated')]}" options="{'no_create': True, 'no_quick_create': True, 'no_create_edit':True}"  />
                            <field name="date" requird="1" attrs="{'readonly':[('state', '=', 'validated')]}" />
                            <field name="balance" />
                            <field name="amount" requird="1" attrs="{'readonly':[('state', '=', 'validated')]}" />
                            <field name="description" attrs="{'readonly':[('state', '=', 'validated')]}" />
                            
                        </group>
                    </group>
                    

                    <div class="form-group" style="width: 30%;margin-left: 54px;" attrs="{'invisible':[('type','=', 'transfer')]}">
                     <field name="show_balance" nolabel="1" /><label for="show_balance">Show Acc Balance</label>
                    </div>

                    <group attrs="{'invisible':[('type','!=', 'transfer')]}">
                        <group>
                            <field name="partner_id" string="Withdrawal Acc.No" requird="1" attrs="{'readonly':[('state', '=', 'validated')]}" options="{'no_create': True, 'no_quick_create': True, 'no_create_edit':True}"  />
                            <field name="partner_id_to" requird="1"  string="Deposit Acc.No" attrs="{'readonly':[('state', '=', 'validated')]}" options="{'no_create': True, 'no_quick_create': True, 'no_create_edit':True}"  />
                            <field name="date" requird="1" attrs="{'readonly':[('state', '=', 'validated')]}" />
                            <field name="balance" />
                            <field name="amount" requird="1" attrs="{'readonly':[('state', '=', 'validated')]}" />
                            <field name="description" attrs="{'readonly':[('state', '=', 'validated')]}" />
                        </group>
                    </group>
                    

                    <div id="chexboxes" style="width:60%" attrs="{'invisible':[('type','!=', 'transfer')]}">
                        <div class="form-group" style="width: 50%;float:left">
                            <field name="show_balance" nolabel="1" /><label for="show_balance">Show Acc Balance</label>
                        </div>

                        <div class="form-group" style="width: 50%;float:right;">
                            <field name="sms_send" nolabel="1" /><label for="sms_send">Send SMS</label>
                        </div>
                    </div>

                </sheet>
            </form>
        </field>
    </record>

    <record id="amaana_tree_view1" model="ir.ui.view">
        <field name="name">Amaana Main Tree View</field>
        <field name="model">amaana.amaana</field>
        <field name="arch" type="xml">
            <tree decoration-info="state == 'open'">
                <field name="name" />
                <field name="date" />
                <field name="partner_id" />
                <field name="amount" sum="amount" />
                <field name="state" />
            </tree>
        </field>
    </record>

    <record id="amaana_tree_view2" model="ir.ui.view">
        <field name="name">Amaana Transfer Tree View</field>
        <field name="model">amaana.amaana</field>
        <field name="arch" type="xml">
            <tree decoration-info="state == 'open'">
                <field name="name" />
                <field name="date" />
                <field name="partner_id" string="Withdrawal From" />
                <field name="partner_id_to" />
                <field name="amount" sum="amount" />
                <field name="state" />
            </tree>
        </field>
    </record>

    <record id="amaana_search_view" model="ir.ui.view">
        <field name="name">Amaana Search View</field>
        <field name="model">amaana.amaana</field>
        <field name="arch" type="xml">
            <search>
                <separator orientation="vertical"/>
                    <field name="type" invisible="1" />
                    <field name="name" />
                    <field name="date" />
                    <field name="partner_id" attrs="{'invisible':[('type','!=',['deposit', 'withdraw'])]}" />
                    <field name="partner_id" string="Withdrawal From" attrs="{'invisible':[('type','!=', 'transfer')]}" />

                <separator/>
                    <filter string="Today" domain="[('date', '&gt;=', datetime.datetime.now().strftime('%Y-%m-%d 00:00:00')), ('date', '&lt;=', datetime.datetime.now().strftime('%Y-%m-%d 23:59:59'))]"/>
                    <filter string="Open" domain="[('state', '=', 'open')]" />
                    <filter string="Validated" domain="[('state', '=', 'validated')]" />
                <separator/>
                    <filter string="Customer" domain="[]" context="{'group_by': 'partner_id'}"/>
                    <filter string="State" domain="[]" context="{'group_by': 'state'}"/>
                    <filter string="Date" domain="[]" context="{'group_by': 'date'}"/>
            </search>
        </field>
    </record>

    <!--Inherit Partner form view-->
    <record id="amaana_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
               <!-- CUSTOMIZATIONS -->

            <field name="category_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>

            <field name="mobile" position="attributes">
                <attribute name="required">1</attribute>
            </field>

            <field name="vat"  position="before">
                <field name="ref" string="Account No." />
                <field name="debit" string="Balance" />
                <field name="allow_overdraft" />
            </field>
        </field>
    </record>

    <!--Amaana Configuration View-->
    <record id="amaana_settings_view" model="ir.ui.view">
    <field name="name">Amaana configuration</field>
    <field name="model">res.config.settings</field>
    <field name="inherit_id" ref="base.res_config_settings_view_form" />
    <field name="arch" type="xml">
        <xpath expr="//div[hasclass('settings')]" position="inside">
                <div class="app_settings_block" data-string="Amaana" string="Amaana" data-key="amaana">
                    <h2>General Settings</h2>
                    <div class="row mt16 o_settings_container">
                        <div class="col-xs-12 col-md-6 o_setting_box">
                            <div class="o_setting_right_pane">
                                <label for="default_journal_id"/>
                                <div class="text-muted">
                                    Select default Journal for transactions
                                </div>
                                <div class="content-group">
                                    <div class="mt16">
                                        <field name="default_journal_id" class="o_light_label"  options="{'no_create': True, 'no_quick_create': True, 'no_create_edit':True}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2>Prefix</h2>
                    <div class="row mt14 o_settings_container">
                        <div class="col-xs-4 col-md-4 o_setting_box">
                            <div class="o_setting_right_pane">
                                <label for="default_deposit_prefix" string="Deposit"/>
                                <div class="text-muted">
                                    Default prefix for Deposit transactions
                                </div>
                                <div class="content-group">
                                    <div class="mt16">
                                        <field name="default_deposit_prefix" class="o_light_label" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-4 col-md-4 o_setting_box">
                            <div class="o_setting_right_pane">
                                <label for="default_withdraw_prefix" string="Withdraw"/>
                                <div class="text-muted">
                                    Default prefix for Withdraw transactions
                                </div>
                                <div class="content-group">
                                    <div class="mt16">
                                        <field name="default_withdraw_prefix" class="o_light_label" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-4 col-md-4 o_setting_box">
                            <div class="o_setting_right_pane">
                                <label for="default_withdraw_prefix" string="Account to Account"/>
                                <div class="text-muted">
                                    Default prefix for Acc to Acc transactions
                                </div>
                                <div class="content-group">
                                    <div class="mt16">
                                        <field name="default_acc_to_acc_prefix" class="o_light_label" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
    </field>
</record>


    <!--Actions-->

    <!--Deposit Action-->
    <record id="deposit_action" model="ir.actions.act_window">
            <field name="name">Deposits</field>
            <field name="res_model">amaana.amaana</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="domain">[('type','=', 'deposit')]</field>
            <field name="context">{'default_type': 'deposit'}</field>
            <field name="view_id" ref="amaana_from_view"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Deposit(Dhigasho)
                </p>
            </field>
    </record>

    <record id="deposit_action_tree" model="ir.actions.act_window.view">
        <field name="view_mode">tree</field>
        <field name="view_id" ref="amaana_tree_view1" />
        <field name="act_window_id" ref="deposit_action" />
    </record>

    <!--Withdraw Action-->
    <record id="withdraw_action" model="ir.actions.act_window">
            <field name="name">Withdraws</field>
            <field name="res_model">amaana.amaana</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="domain">[('type','=', 'withdraw')]</field>
            <field name="context">{'default_type': 'withdraw'}</field>
            <field name="view_id" ref="amaana_from_view"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Withdraaw(Qaadasho)
                </p>
            </field>
    </record>

    <record id="withdraw_action_tree" model="ir.actions.act_window.view">
        <field name="view_mode">tree</field>
        <field name="view_id" ref="amaana_tree_view1" />
        <field name="act_window_id" ref="withdraw_action" />
    </record>

    <!--Transfer Action-->
    <record id="transfer_action" model="ir.actions.act_window">
            <field name="name">Transfer From Account to Account</field>
            <field name="res_model">amaana.amaana</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="domain">[('type','=', 'transfer')]</field>
            <field name="context">{'default_type': 'transfer'}</field>
            <field name="view_id" ref="amaana_from_view"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Transfer
                </p>
            </field>
    </record>

    <record id="transfer_action_tree" model="ir.actions.act_window.view">
        <field name="view_mode">tree</field>
        <field name="view_id" ref="amaana_tree_view2" />
        <field name="act_window_id" ref="transfer_action" />
    </record>

    <!--Configuratin Action-->
    <record id="amaana_settings_action" model="ir.actions.act_window">
        <field name="name">amaana Configuration</field>
        <field name="res_model">res.config.settings</field>
        <field name="view_id" ref="amaana_settings_view"/>
        <field name="view_mode">form</field>
        <field name="target">inline</field>
    </record>

    <!--Customer Action-->
    <record model="ir.actions.act_window" id="customer_action">
            <field name="name">Customers</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="base.view_partner_form"/>
            <field name="domain">[('deposit_withdraw','=', True),('supplier','=', True),('customer','=', True)]</field>
            <field name="context">{'default_deposit_withdraw': 1, 'default_customer': 1, 'default_supplier': 1}</field>
            <field name="help" type="html">
                    <p class="o_view_nocontent_smiling_face">Create Customer
                    </p>
            </field>
    </record>

    <record id="customer_action_tree" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="view_id" ref="base.view_partner_tree" />
            <field name="act_window_id" ref="customer_action" />
    </record>

    <!--Menuitems-->

    <menuitem id="amaana_root"
              name="Amaana"
              web_icon="amaana,static/description/icon.png"
            />

    <menuitem
            id="deposits_menu"
            name="Deposits"
            parent="amaana_root"
            action="deposit_action"
            sequence="1"
			/>

    <menuitem
            id="withdraws_menu"
            name="Withdraws"
            parent="amaana_root"
            action="withdraw_action"
            sequence="5"
			/>

    <menuitem
            id="transfers_menu"
            name="Account to Account"
            parent="amaana_root"
            action="transfer_action"
            sequence="10"
			/>

    <menuitem
            id="reporting_menu"
            name="Reporting"
            parent="amaana_root"
            sequence="10"
			/>

    <menuitem
            id="customer_statement_report_menu"
            name="Customer/Supplier Statement"
            parent="reporting_menu"
            action="account_customer_statement.action_account_partner_ledger_menu1"
            sequence="1"
			/>

    <menuitem
            id="journals_audit_report_menu"
            name="Journals Audit"
            parent="reporting_menu"
            action="account.action_account_print_journal_menu"
            sequence="1"
			/>

    <menuitem
            id="partner_ledger_report_menu"
            name="Customer Ledger"
            parent="reporting_menu"
            action="account.action_account_partner_ledger_menu"
            sequence="5"
			/>

    <menuitem
            id="general_ledger_report_menu"
            name="General Ledger"
            parent="reporting_menu"
            action="account.action_account_general_ledger_menu"
            sequence="10"
			/>

    <menuitem
            id="trial_balance_report_menu"
            name="Trial Balance"
            parent="reporting_menu"
            action="account.action_account_balance_menu"
            sequence="15"
			/>

    <menuitem
            id="balance_sheet_report_menu"
            name="Balance Sheet"
            parent="reporting_menu"
            action="account.action_account_report_bs"
            sequence="20"
			/>

    <menuitem
            id="profit_and_loss_report_menu"
            name="Profit and Loss"
            parent="reporting_menu"
            action="account.action_account_report_pl"
            sequence="25"
			/>

    <menuitem
            id="aged_partner_report_menu"
            name="Aged Partner Balance"
            parent="reporting_menu"
            action="account.action_account_aged_balance_view"
            sequence="30"
			/>

    <menuitem
            id="tax_report_menu"
            name="Tax Report"
            parent="reporting_menu"
            action="account.action_account_tax_report"
            sequence="35"
			/>

    <menuitem
            id="settings_menu"
            name="Settings"
            parent="amaana_root"
            sequence="20"
			/>

    <menuitem
            id="configuration_menu"
            name="Configuration"
            parent="settings_menu"
            action="amaana_settings_action"
            sequence="1"
			/>

    <menuitem
            id="customer_menu"
            name="Customers"
            parent="settings_menu"
            action="customer_action"
            sequence="5"
			/>


</odoo>