<?xml version="1.0" encoding="utf-8"?>
<odoo>
		<data>
				<record id="view_account_payment_form_inherit_company_branch" model="ir.ui.view">
						<field name="name">account.payment.inherit.company.branch</field>
						<field name="model">account.payment</field>
						<field name="inherit_id" ref="account.view_account_payment_form"/>
						<field name="arch" type="xml">
								<xpath expr="//field[@name='journal_id']" position="after">
										<field name="company_branch_id" groups="odoo_multi_branch.group_multi_branches" widget="selection" options="{'no_create': True}"/>
								</xpath>
								<xpath expr="//field[@name='partner_id']" position="replace">
										<field name="partner_id"
											attrs="{'required': [('state', '=', 'draft'), ('payment_type', 'in', ('inbound', 'outbound'))], 'invisible': [('payment_type', 'not in', ('inbound', 'outbound'))], 'readonly': [('state', '!=', 'draft')]}"
											context="{'default_is_company': True, 'default_supplier': payment_type == 'outbound', 'default_customer': payment_type == 'inbound'}" options="{'no_create': True}"/>
								</xpath>
						</field>
				</record>

			 <record id="view_account_payment_search_inherit_branch" model="ir.ui.view">
						<field name="name">account.payment.inherit.company.branch</field>
						<field name="model">account.payment</field>
						<field name="inherit_id" ref="account.view_account_payment_search"/>
						<field name="arch" type="xml">
								<xpath expr="//search" position="inside">
										<field name="company_branch_id"/>
										<filter name="company_branch_id" string="Branch" domain="[]" context="{'group_by':'company_branch_id'}"/>
								</xpath>
						</field>
				</record>

		</data>
</odoo>
